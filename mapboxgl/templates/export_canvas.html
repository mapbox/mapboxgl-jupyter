<style>
    #btn-download-map, #btn-download-legend {
        background-color: white;
        color: #6e6e6e;
        text-decoration: none;
        border-radius: 3px;
        top: 10px;
        left: 10px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.10);
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
        padding: 10px;
        position: absolute;
        z-index: 1;
    }
    #btn-download-legend {top: 60px;}
</style>

<script type="text/javascript">

    var buttonContainer = document.createElement('div');
    buttonContainer.id = 'download-controls';
    document.body.appendChild(buttonContainer);
    document.getElementById('download-controls').innerHTML = `<a href="#" class="button" id="btn-download-map" download="imgcapture.png">Snapshot</a>
        <a href="#" class="button" id="btn-download-legend" download="legend.png">Snapshot Legend</a>
        `;

    html2canvas(document.body).then(canvas => {
        var legendButton = document.getElementById('btn-download-legend');
        legendButton.addEventListener('click', function (e) {
            legendButton.href = canvas.toDataURL("image/png");
        });
    });

    var mapButton = document.getElementById('btn-download-map');
    mapButton.addEventListener('click', function (e) {
        var mapCanvas = map.getCanvas();
        mapButton.href = mapCanvas.toDataURL("image/png");
    });

</script>